        <tr class="teacher-row">
            <td>
                <%if teacher.user.user_profile then action='show'; label= teacher.user.user_profile.name; class_name="" else action='new'; label= "Create Profile"; class_name="cell-link" end%>
                <%= link_to label, {:controller => 'user_profiles', :action => action, :id => teacher.user}, {:class => class_name} %>
            </td>
            <td>
                <%= link_to teacher.user.email, {:controller => 'user_profiles', :action => action, :id => teacher.user} %>
            </td>
            <td>
                <%teacher.currently_owned_klasses.each do |klass|%>
				<%= link_to klass.name + "  ", {:controller => :klasses, :action => 'show', :id=>klass}%>
				<%end%>
            </td>
			<td>
				<%if !@subjects[teacher.id].nil?%>
					<%=@subjects[teacher.id].collect{|subject| subject.name + ", "}.to_s.chop.chop %>
				<%end%>
            </td>
            <% if !teacher.current_allotments.empty? then label='Show Allotments'; action='show' else label='Make Allotments'; action='allot' end%>
            <td>
                <%= link_to label,  {:controller => 'teachers', :action => action, :id => teacher}, {:class => "cell-link"} %>
            </td>
        </tr>