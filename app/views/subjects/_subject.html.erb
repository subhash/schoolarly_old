<tr id="subject-<%= subject.id%>">
    <td class="ui-state-default">
        <%= subject.name %>
    </td>
    <% if teacher_klass_allotment %>
	<%teacher_subject_allotment=teacher_klass_allotment.teacher_subject_allotment%>
    <td>
        <% teacher = teacher_subject_allotment.teacher %>
        <%if teacher.name %>
        <%=link_to teacher.name, teacher_path(teacher) %>
        <%else %>
        <%=link_to "Profile not created", {:controller => 'user_profiles', :action => 'new', :id => teacher.user}, {:class => "profile"} %>
        <%end %>
    </td>
    <td>
        <%= link_to_remote 'Remove Assignment', :url => {:controller => 'klasses', :action => 'delete_allotment',:id => teacher_klass_allotment}, :confirm => 'Are you sure?' %>
    </td>
    <%else %>
    <td class="ui-state-focus">
        <div id="assign-teacher-dialog-<%= subject.id%>" style ="display: none;">
            <%= render :partial => 'teacher_klass_allotments/allot_teacher_form',:locals => {:teacher_klass_allotment => TeacherKlassAllotment.new(:klass =>klass), :teachers => klass.teachers(subject), :subject => subject} %>
        </div>
        <%= link_to_function "Assign Teacher" do |page|
        page << "bindDialog('assign-teacher-dialog-#{subject.id}');"
        page << "openDialog('assign-teacher-dialog-#{subject.id}');"
        end %>
    </td>
    <%end %>
</tr>
