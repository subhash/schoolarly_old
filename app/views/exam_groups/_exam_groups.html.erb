<!--TODO The recently added div to be reviewed !--><%if entity.class == Klass %>
<div id="<%='examgroups-of-' + entity.id.to_s%>" style="display: none;">
</div>
<%end %>
<%exam_groups = exams.group_by{|e| e.exam_group} %>
<%exam_groups.each do |exam_group, exams| %>
<table id="<%='examgroup-'+exam_group.id.to_s%>" class="exams">
    <tr class = "heading">
        <td class="left">
            <span><%=exam_group.exam_type.description %></span>
            <span id="edit_description_<%= exam_group.id %>" title='Edit'></span>
            <span id=<%="description_#{exam_group.id}" %>><%=exam_group.description %></span>
            <%= in_place_editor "description_#{exam_group.id}" ,{:url => {:controller => 'exam_groups', :action => 'set_exam_group_description', :id => exam_group},:external_control => "edit_description_#{exam_group.id}"} %>
        </td><td class="right">
            <%= link_to_remote 'Add Exam', :url =>  {:controller => 'exams', :action => 'new', :exam_group => exam_group, :entity_class => entity.class.name, :entity_id => entity}, :html => {:title => 'Add Exam'} %>
			<% if exam_group.is_destroyable? %>
            <%= link_to_remote 'Delete all exams', :url => {:controller => :exam_groups, :action => 'destroy', :id => exam_group, :context => entity.class.name.pluralize}, :html => {:title => 'Delete'}, :confirm => 'All the exams under this will be deleted. Are you sure?' %>
            <%end %>            
        </td>
        
    </tr>
    <% exams.each do |exam| %>
    <%= render :partial => 'exams/exam', :object => exam, :locals => {:entity => entity } %>
    <% end %>
</table>
<% end %>
